import{s as i}from"./studentEntityService.service-Ci6a9HR0.js";import{u as y}from"./useDOMManager-kq_JSqPb.js";import{n as c,a as S}from"./index-Ckh9VWKK.js";import"./useLocalstorage-BtQVKKxs.js";let m=!1;async function p(){m=!0;const{createList:l,createListActions:v}=y(),{showNotification:r}=S(),n=document.querySelector(".lista-aluno .lista-wrapper");if(n){if(document.querySelector(".loading"))return!1;const e=document.createElement("div");e.classList.add("loading"),e.innerHTML="Carregando...",n.appendChild(e);const{data:g}=await i.getAll(),s=l(g);v(s),s.querySelectorAll("li").forEach(a=>{const o=a.getAttribute("data-id"),u=a.querySelector(".edit-button"),d=a.querySelector(".delete-button"),f=a.querySelector(".active-button");u&&u.addEventListener("click",t=>{t.preventDefault(),c(null,`/aluno/editar/${o}`)}),d&&d.addEventListener("click",async t=>{t.preventDefault(),await i.delete(o),r({type:"success",title:"Sucesso",message:"Aluno desativado com sucessso"}),c(null,"/aluno/lista/")}),f&&f.addEventListener("click",async t=>{t.preventDefault(),await i.activate(o),r({type:"success",title:"Sucesso",message:"Aluno reativado com sucessso"}),c(null,"/aluno/lista/")})}),e.remove(),n.appendChild(s)}}const A={init(){m||(p(),window.addEventListener("changepage",function(l){p()}))}};export{A as default};
