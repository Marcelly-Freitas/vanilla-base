import{s as l}from"./studentEntityService.service-Ci6a9HR0.js";import{n as d,a as m}from"./index-Ckh9VWKK.js";import"./useLocalstorage-BtQVKKxs.js";function c(s=!0){const e=document.querySelector(".form-cadastro-aluno");if(e){const n=e.querySelectorAll("input, select"),t=e.querySelector("button[type=submit]"),o=e.querySelector("button[type=button]");s?(n.forEach(a=>{a.setAttribute("disabled","disabled")}),t.setAttribute("disabled","disabled"),t.textContent="Carregando...",o.setAttribute("disabled","disabled")):(n.forEach(a=>{a.removeAttribute("disabled")}),t.removeAttribute("disabled"),t.textContent="Atualizar",o.removeAttribute("disabled"))}}async function b(){const s=[...window.location.href.split("/")].pop(),e=document.querySelector(".form-cadastro-aluno");if(e){c();const{data:n}=await l.getByCode(s);Object.entries({...n}).forEach(([t,o])=>{if(["id","created_at"].includes(t))return;e.querySelectorAll(`input[name=${t}], select[name=${t}]`).forEach(i=>{["nacionalidade","naturalidade"].includes(t)&&i.querySelectorAll("options").forEach(r=>{r.removeAttribute("selected"),r.value===o&&r.setAttribute("selected")}),i.value=o})}),c(!1)}}async function f(s){s.preventDefault();const e=document.querySelector(".form-cadastro-aluno"),n=[...window.location.href.split("/")].pop();c(e);const t=e.querySelectorAll("input, select"),{showNotification:o}=m();if(t){const a={};t.forEach(i=>{const u=i.getAttribute("name"),r=i.value;a[u]=r}),await l.update(n,a),o({type:"success",title:"Sucesso",message:"Dados cadastrados com sucesso"}),c(e),d(null,"/aluno/lista")}}const A={init(){b(),window.onFormSubmit=null,window.onFormSubmit=f}};export{A as default};
