import{t as y}from"./turmaEntityService.service-C-A0ySkN.js";import{u as L}from"./useDOMManager-kq_JSqPb.js";import{n as v}from"./index-Ckh9VWKK.js";import"./useLocalstorage-BtQVKKxs.js";let d=!1;async function u(){d=!0;const{createAttendanceList:i}=L(),o=document.querySelector(".frequencia-page .frequencia-search-form"),e=document.querySelector(".frequencia-page .lista-wrapper"),f=document.querySelector(".frequencia-page .frequencia-empty-title");o&&e&&o.addEventListener("submit",async p=>{if(p.preventDefault(),document.querySelector(".loading"))return!1;const c=o.querySelector("input[type=search]");if(c){const s=c.value;if(s.length){e.innerHTML="";const a=document.createElement("div");a.classList.add("loading"),a.innerHTML="Carregando...",e.append(a);const{data:m}=await y.getAll(),l=[...m].filter(t=>t.nome.toLowerCase().includes(s.toLowerCase()));if(!l.length)e.innerHTML="",e.append(f),alert("Não foram encontrados resultados para a pesquisa.");else{const t=i(l);t.querySelectorAll(".actions").forEach(r=>{const n=document.createElement("button");n.classList.add("btn"),n.classList.add("btn-primary"),n.textContent="Lançar frequência",r.appendChild(n)}),t.querySelectorAll("li").forEach(r=>{r.querySelector(".actions").addEventListener("click",q=>{const g=r.getAttribute("data-id");q.preventDefault(),v(null,`/turmas/frequencia/${g}`)})}),a.remove(),e.appendChild(t)}}}})}const C={init(){u(),window.addEventListener("changepage",function(i){d||u()})}};export{C as default};
