import{t as L}from"./turmaEntityService.service-C-A0ySkN.js";import{u as v}from"./useDOMManager-kq_JSqPb.js";import{n as h}from"./index-Ckh9VWKK.js";import"./useLocalstorage-BtQVKKxs.js";let d=!1;async function u(){d=!0;const{createAttendanceList:i}=v(),o=document.querySelector(".registration-page .registration-search-form"),t=document.querySelector(".registration-page .lista-wrapper"),m=document.querySelector(".registration-page .attendance-empty-title");o&&t&&o.addEventListener("submit",async p=>{if(p.preventDefault(),document.querySelector(".loading"))return!1;const s=o.querySelector("input[type=search]");if(s){const c=s.value;if(c.length){t.innerHTML="";const r=document.createElement("div");r.classList.add("loading"),r.innerHTML="Carregando...",t.append(r);const{data:f}=await L.getAll(),l=[...f].filter(e=>e.nome.toLowerCase().includes(c.toLowerCase()));if(!l.length)t.innerHTML="",t.append(m),alert("NÃ£o foram encontrados resultados para a pesquisa.");else{const e=i(l);e.querySelectorAll(".actions").forEach(a=>{const n=document.createElement("button");n.classList.add("btn"),n.classList.add("btn-primary"),n.textContent="Matricular na turma",a.appendChild(n)}),e.querySelectorAll("li").forEach(a=>{a.querySelector(".actions").addEventListener("click",g=>{const y=a.getAttribute("data-id");g.preventDefault(),h(null,`/turmas/matricula/${y}`)})}),r.remove(),t.appendChild(e)}}}})}const C={init(){u(),window.addEventListener("changepage",function(i){d||u()})}};export{C as default};
